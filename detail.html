<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Page</title>
    <style>
        * { font-family: 'GmarketSans'; margin: 0; padding: 0; color: #333; }
        .detail-container { max-width: 1000px; margin: 20px auto; }
        .detail-container img { width: 100%; height: auto; border-radius: 8px; margin-bottom: 20px; }
        h1 { color: #333; margin-bottom: 10px; }
        h3 { color: #555; margin-top: 20px; }
        ul { list-style-type: none; padding-left: 0; }
        li { margin-bottom: 5px; }
        a { color: #007bff; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="detail-container">
        <a href="index.html">← Back to Main</a>
        <h1 id="detail-name"></h1>
        <img id="detail-image" src="" alt="Detail Image">
        <p id="detail-description"></p>
        <div id="detail-main-attractions"></div>
        <p><strong>Region:</strong> <span id="detail-region"></span></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const itemId = params.get('id'); // Get the ID from the URL

            if (itemId) {
                fetch('data.json') // Fetch the same data.json
                    .then(response => {
                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        return response.json();
                    })
                    .then(data => {
                        const item = data.find(d => d.id == itemId); // Find the item by ID

                        if (item) {
                            document.getElementById('detail-name').textContent = item.name; // Use 'name' for full display
                            document.getElementById('detail-image').src = item.image_url;
                            document.getElementById('detail-image').alt = item.name;
                            document.getElementById('detail-description').textContent = item.description;
                            document.getElementById('detail-region').textContent = item.region;

                            const attractionsDiv = document.getElementById('detail-main-attractions');
                            attractionsDiv.innerHTML = '<h3>주요 명소:</h3><ul>' +
                                item.main_attractions.map(attr => `<li><strong>${attr.name}:</strong> ${attr.description}</li>`).join('') +
                                '</ul>';

                        } else {
                            document.querySelector('.detail-container').innerHTML = '<p>Item not found.</p><a href="index.html">Go back</a>';
                        }
                    })
                    .catch(error => console.error('Error fetching detail data:', error));
            } else {
                document.querySelector('.detail-container').innerHTML = '<p>No item ID provided.</p><a href="index.html">Go back</a>';
            }
        });
    </script>
</body>
</html>